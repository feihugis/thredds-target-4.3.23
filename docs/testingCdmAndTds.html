<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  
  <title>Testing CDM and TDS</title><style type="text/css">
  pre {font-size: 9pt; padding: 10px; background-color: #E7E7E7; border: 1px solid #CFCFCF; width: 85%;}
  code {font-size: 11pt;}
  dl {margin: 10px 5px 5px 15px;)
  </style></head>
<body>
<h1>Testing CDM and TDS</h1>
<hr style="width: 100%; height: 2px;">

<h2>Utility Classes</h2>

<h3>CDM ucar.nc2.TestAll</h3>

<p>Locate
existing data directories, setup a temporary test directory, and provide a number of static utility methods.</p><h4>Static&nbsp;Variables</h4><p>A number of directory paths are available in the following String variables:</p><ul><li>upcShareDir - The Unidata shared directory. Usually:</li><ul><li>"//zero/share/" or</li><li>"zero:/upc/share"</li></ul><li>upcShareThreddsDataDir - The Unidata THREDDS data dir. Usually:</li><ul><li>"//zero/share/thredds/data/" or</li><li>"zero:/upc/share/thredds/data</li></ul><li>testDataDir - The Unidata test data directory. Usually:</li><ul><li>"//newshemp/testdata",</li><li>"//newshemp/data/testdata", or</li><li>"newshemp:/data/testdata".</li></ul><li>cdmTestDataDir - the source code distributed data directory: "src/test/data/"</li><li>temporaryDataDir - a temporary directory in the source code directory tree: "target/test/tmp/"</li></ul><p></p><p>Data directories include:</p><ul><li> the Unidata test data directory
(/data/testdata on newshemp);</li><li>the Unidata thredds data directory (/upc/share/thredds/data); and</li><li>&nbsp;the CDM code repository test data
directory (cdm/src/test/data).</li></ul><p>&nbsp;The temporary test directory:</p><ul><li>In the build directory (cdm/target/test/tmp).</li></ul><p>Several system or user
properties are used. They can be set with&nbsp;"-Dproperty.name=value"
options on the JVM command-line or can be set in a "thredds.properties"
file in the "user.home" directory. An example:</p>
<pre style="margin-left: 40px;">unidata.upc.share.path=//zero/share/<br><br>unidata.testdata.path=//newshemp/testdata</pre>

<p>The following static variables are provided for accessing the above directories:</p><ul><li>upcShareDir:String - "//zero/share/"</li><li>upcShareTestDataDir:String - "//zero/share/testdata/" [NOTE: No longer exists]</li><li>upcShareThreddsDataDir:String - "//zero/share/thredds/data/"</li><li>upcShareDirFile:File -&nbsp;"//zero/share"</li><li>testDataDir:File - "//newshemp/testdata</li><li>cdmTestDataDir:String - "cdm/target/test/tmp/"</li><li>temporaryDataDir:String - "target/test/tmp/"</li></ul><p>Note
that all the String variables end with a slash ("/"). All are checked
that they exist (error messages are output if they don't or can't be
created).</p><p>The following static methods are provided:</p><ul><li>closeEnough(double,double):boolean</li><li>closeEnough(double,double,double):boolean</li><li>closeEnough(float,float):boolean</li><li>openAllInDir(String dirName, FileFilter ff)</li><li>readAllDir(String dirName, FileFilter ff)</li><li>...</li></ul><p></p>

<h3>CDM ucar.unidata.utils.TestFileDirUtils</h3><p>Static utility methods for creating directories and files.</p>

<h3>CDM ucar.unidata.utils.TestDiskCacheUtils</h3><p>Static utility methods for setup and emptying ucar.nc2.util.DiskCache and ucar.nc2.util.DiskCache2.</p><h3>TDS thredds.tds.idd.TdsTestUtils</h3><p>Static utility methods for setup for testing of TDS.</p><ul><li>getTargetTdsUrl():String
- Uses system properties "thredds.tds.test.server" and
"thredds.tds.test.port" to construct the base TDS URL. The default
value is "http://motherlode.ucar.edu:8080/thredds/".</li></ul>

<h3>TDS thredds.tds.idd.GridDatasetTestUtils</h3>
Static utility methods ...

<h3>TDS thredds.tds.idd.CompareGridVarNamesUtils</h3>
Static utility methods ...

<h3>TDS thredds.tds.idd.StandardCatalogUtils</h3>

<p>Static methods that return Object[][] listing catalog URLs for use in JUnit parameterized tests.</p>

<ul><li>getIddMainCatalogUrls():Object[][]</li><li>getIddDeepCatalogUrls():Object[][]</li><li>getMlodeMainCatalogUrls():Object[][]</li></ul>

<p>For instance, to use the main IDD catalogs as parameters for a test, include the following method in your test calls:</p>

<pre style="margin-left: 40px;">@Parameterized.Parameters<br>public static Collection&lt;Object[]&gt; getCatalogUrls()<br>{<br>  List&lt;Object[]&gt; catUrls = new ArrayList&lt;Object[]&gt;(<br>          Arrays.asList( StandardCatalogUtils.getIddMainCatalogUrls()));<br>  return catUrls;<br>}</pre>

<h3>TDS thredds.tds.idd.IddModelDatasetsUtils</h3>

<p>Static methods that return Object[][] that list IDs for model datasets for use in JUnit parameterized tests:</p>

<ul><li>getModelIds():Object[][]</li></ul><p>For instance, to use the model IDs as parameters for a test, include the following method in your test calls:</p>

<pre style="margin-left: 40px;">@Parameterized.Parameters<br>public static Collection&lt;Object[]&gt; getModelIds()<br>{<br>  List&lt;Object[]&gt; catUrls = new ArrayList&lt;Object[]&gt;(<br>          Arrays.asList( IddModelDatasetsUtils.getModelIds()));<br>  return catUrls;<br>}</pre>

<h3>TDS thredds.TestAll</h3>

<p>test</p>
<p>cdm/src/test/java/ucar/nc2/TestAll</p>

</body></html>