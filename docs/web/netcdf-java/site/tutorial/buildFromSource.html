<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>NetCDF-Java: Building From Source</title><meta content="Ethan Davis" name="author"></head>
<body>
<h1>Getting Source, Build, and Run ToolsUI</h1>
<hr size="2" width="100%">
<p>In preperation for some hands on IOServiceProvider work, we need a
few things setup and ready to go. First, we'll look at how to get the
netCDF-Java/CDM code. Second, we'll build it with Ant. And, Finally, we'll run the ToolsUI application.<br>
</p>
<h2>Getting Source</h2>
<h3>Distribution</h3>
<p>The current stable release code distribution can be found on<br>
</p>
<ul>
  <li>The netCDF-Java home page:  <a href="http://www.unidata.ucar.edu/software/netcdf-java/"><code>http://www.unidata.ucar.edu/software/netcdf-java/</code></a></li>
  <li>The netCDF-Java FTP site: <a href="ftp://ftp.unidata.ucar.edu/pub/netcdf-java/v2.2.22/"><code>ftp://ftp.unidata.ucar.edu/pub/netcdf-java/v2.2.22/</code></a></li>
</ul>
<p>
</p>


<h3>Source for Workshop</h3>
<p>The required source is available from a tar file at <code>/data/nj/nj22WkshpCode.tar.gz</code>. Unpack this in your home directory:<br>
</p>
<ol>
  <li>Make a directory to unpack into <br>
  </li>
  <ul>
    <li><code>cd ~/ncj</code></li>
    <li><code>mkdir nj-2.2.22</code></li>
    <li><code>cd nj-2.2.22</code></li>
  </ul>
  <li>Unpack the code</li>
  <ul>
    <li><code>tar xvzf /data/nj/nj22WkshpCode.tar.gz</code><br>
    </li>
  </ul>
</ol>
<code></code>
<h2>Build from Source</h2>

<p>To build the netCDF-Java library (CDM) and ToolsUI application:<br>
</p>
<ol>
  <li>Move into the cdm directory, the location of the Ant script</li>
  <ul>
    <li><code>cd cdm</code></li>
  </ul>
  <li>Clean your working directory</li>
  <ul>
    <li><code>ant clean</code></li>
  </ul>
  <li>Build CDM and the ToolsUI</li>
  <ul>
    <li><code>ant compileUI</code></li>
  </ul>
</ol>
Other Ant targets of interest:<br>
<ul>
  <li><code>compile</code> - compiles the netCDF-Java/CDM code<br>
  </li>
  <li><code>makeJar</code>
- builds the minimal netCDF library, ncCore-*.jar, which reads netCDF-3
files; and the full netCDF library, netcdf-*.jar, which implements the
full CDM.</li>
  <li><code>compileUI</code> - compiles the netCDF-Java/CDM and ToolsUI code</li>
  <li><code>makeJarUI</code>
- builds the netCDF ToolsUI library, netcdfUI-*.jar, which includes the
netCDF library plus the user interface classes for the netCDF ToolsUI
application.</li>
</ul>
<p>Now let's run the netCDF ToolsUI application:<br>
</p>
<ol>
  <li>Run script at <code>target/runToolsUI</code></li>
  <ul>
    <li><code>chmod +x target/runToolsUI</code></li>
    <li><code>target/runToolsUI</code><br>
    </li>
  </ul>
</ol>
<p>
</p>


<p>This script runs the following command (with the classpath expanded):</p>

<ul>
<li><code>java -Xmx512m -classpath &lt;classpath&gt; ucar.nc2.ui.ToolsUI</code></li>
</ul>
<h2>Excercise: Unpack Source, Build, and Run ToolsUI</h2>

<p>We'll take the next 15 minutes so you can get this setup on your machines.<br>
</p>

<ol>
<li>Unpack the source</li><li>Build using Ant</li><li>Run ToolsUI</li>
</ol>

Once you've got that working, feel free to try installing a development environment. We will be working in IntelliJ IDEA.
<hr size="2" width="100%">
<h3>Build Using IntelliJ IDEA</h3>

<p>Most of our netCDF-Java and THREDDS team uses IntelliJ IDEA. So, we
have IntelliJ project files available. If you know IntelliJ (or just
want to try it), we have the latest distribution available at <code>/data/ncj/idea-6.0.5.tar.gz</code>. It's easy and no license is required for a 30 day trail.<br>
</p>
<ol>
  <li>Install IntelliJ IDEA in your home directory</li>
  <ul>
    <li><code>cd ~/nj</code></li>
    <li><code>tar xvzf /data/nj/idea-6.0.5.tar.gz</code></li>
  </ul>
  <li>Set <code>JDK_HOME</code> environment variable</li>
  <ul>
    <li><code>vi ~/.bashrc</code></li>
  </ul>
  <li>Change memory settings for IDEA</li>
  <ul>
    <li><code>cd idea-6180/bin</code></li>
    <li><code>vi idea.vmoptions</code></li>
    <li>Set <code>-Xms</code> option to <code>-Xms256m</code></li>
    <li>Set <code>-Xmx</code> option to <code>-Xmx512m</code></li>
  </ul>
  <li>Run IDEA<br>
  </li>
  <ul>
    <li><code>./idea.sh &amp;</code></li>
  </ul>
  <li>Open Project: <code>intelliJ/thredds.ipr</code></li>
  <li>Open project window</li>
  <li>Set default VCS to subversion<br>
  </li>
  <li>Set up JDK (<code>/usr/java/jdk1.5.0_12</code>)</li>
  <li>Build project<br>
  </li>
  <li>Setup to run ToolsUI</li>
  <ol>
    <li>Select menu item: "Run" - "Edit Configurations"</li>
    <li>Add new configuration by selecting the "+" icon and "Application"</li>
    <li>Set name to "ToolsUI"</li>
    <li>Set main class to "ucar.nc2.ui.ToolsUI"</li>
    <li>Set VM parameters to "-Xmx256 -ea"</li>
    <li>Set working directory to the "ui" rather than "intelliJ" directory</li>
    <li>Click on the OK button<br>
    </li>
  </ol>

  <li>Run ToolsUI<br>
  </li>
</ol>
<h3>Build Using Eclipse<br>
</h3>
<p>Sorry, you are on your own with Eclipse. Not many Eclipse users at Unidata.<br>
</p>
<h3>Build Using NetBeans</h3>
<p>Sorry, once again you are on your own if you want to use NetBeans.<br>
</p><br>
<hr size="2" width="100%"></body></html>