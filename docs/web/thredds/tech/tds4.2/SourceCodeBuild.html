<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <link rel="stylesheet" href="../tds.css" type="text/css">

  <title>Building TDS from Source Code</title>
</head>
<body>
<h1><img src="../images/unidataLogo.png" alt="Unidata" align="middle" height="75" width="75">Building TDS from Source Code</h1>

<hr width="100%">

<h2><a name="srcCodeAntBuild">TDS Source Code Build</a></h2>

<p> To build the TDS thredds.war file, you need the <code>tds</code>, <code>lib</code>, and
  <code>common</code> source code directories. They are available in our source code distribution
  (see the <a href="#srcCodeDistro">"Source Code Distribution" section</a>) and from our SVN
  repository (see the <a href="#srcCodeRepository">"Source Code Repository" section</a>).
</p>

<p>Once you have a copy of the <code>tds</code>, <code>lib</code>, and
  <code>common</code> source code directories, 'cd' to the <code>tds</code>
  directory and run '<code>ant clean makeWar</code>' (see <a href="#antDeployTaskNote">note</a>).
</p>
<p>This will generate a <code>tds/target</code> directory which will contain
  a <code>thredds.war</code> file and a <code>war</code> directory.</p>


<blockquote>
  <hr width="25%" align="left">
  <p>
    <a name="antDeployTaskNote"></a><strong>Note</strong>: For TDS 4.2.5 and before, you must have
    <code>catalina-ant.jar</code> in your Ant installations <code>lib/</code> directory. It is not
    required after TDS 4.2.5. (See the related FAQ entry <a href="faq.html#antDeployTask">here</a>.)
  </p>
  <hr width="25%" align="left">
</blockquote>

<h2><a name="srcCodeDistro">TDS Source Code Distribution</a></h2>

<p>TDS source code distributions are available from the
  <a href="ftp://ftp.unidata.ucar.edu/pub/thredds/">THREDDS FTP site</a>.</p>

<p>The TDS source code distribution has the following directory structure:</p>
<ul>
  <li>tds - contains the TDS source code including the Ant build.xml file used
    in the build above. [This directory is required to build TDS.]</li>
  <li>lib - contains the binary class libraries used by the TDS (including
    netcdf-*.jar and unidataCommon.jar). [This directory is required to build TDS.]</li>
  <li>common - contains source used by the TDS and the GRIB library.
    [This directory is required to build TDS.]</li>
  <li>cdm - contains the netCDF-Java/CDM source code
    (CDM build documentation [[coming soon]]).</li>
  <li>intelliJ - project files for IntelliJ IDEA 9:
    <ul>
      <!--li>tdsOnly - [[coming soon]].</li-->
      <li>threddsFull - assumes source code for Unidata Common, OPeNDAP, GRIB,
        and more. See <a href="#intellijProj">below</a> for details</li>
    </ul>
  </li>
</ul>

<h2><a name="srcCodeRepository">TDS Source Code Repository</a></h2>

<p>The public THREDDS and CDM/netCDF-Java subversion repository is available at
  <a href="http://svn.unidata.ucar.edu/repos/thredds/">http://svn.unidata.ucar.edu/repos/thredds/</a>.
  TDS 4.2 is currently our development code which is on the
  <a href="http://svn.unidata.ucar.edu/repos/thredds/trunk/">trunk</a>.
</p>
<p>Building the TDS thredds.war file as described <a href="#srcCodeAntBuild">above</a>, requires checking out
  only three directories:</p>
<ul>
  <li>tds - <a href="http://svn.unidata.ucar.edu/repos/thredds/trunk/tds">http://svn.unidata.ucar.edu/repos/thredds/trunk/tds</a></li>
  <li>lib - <a href="http://svn.unidata.ucar.edu/repos/thredds/trunk/lib">http://svn.unidata.ucar.edu/repos/thredds/trunk/lib</a></li>
  <li>common - <a href="http://svn.unidata.ucar.edu/repos/thredds/trunk/common">http://svn.unidata.ucar.edu/repos/thredds/trunk/common</a></li>
</ul>

<hr>
<h2><a name="intellijProj">IntelliJ IDEA Project for TDS and CDM/netCDF-Java</a></h2>

<p>As mentioned above, the <code>intelliJ/threddsFull</code> directory contains IntelliJ IDEA
  project files with modules for GRIB, BUFR, OPeNDAP, Unidata Common, CDM/netCDF-Java,
  ToolsUI, and TDS. You can modify this for the setup you have by simply removing the
  module dependencies and replacing them with binary class jar file dependencies (all
  the needed jar file are in the <code>lib</code> directory.
</p>
<p>For the full setup, your directory structure should look like this:
</p>
<ul>
  <li>thredds - Development code (trunk) from SVN: <a href="http://svn.unidata.ucar.edu/repos/thredds/trunk/">http://svn.unidata.ucar.edu/repos/thredds/trunk/</a></li>
  <li>unidataCommon - Development code (trunk) from SVN: <a href="http://svn.unidata.ucar.edu/repos/common/java/trunk/">http://svn.unidata.ucar.edu/repos/common/java/trunk/</a></li>
  <li>Java-OPeNDAP - Development code (trunk) from SVN: <a href="http://scm.opendap.org/svn/trunk/Java-OPeNDAP/">http://scm.opendap.org/svn/trunk/Java-OPeNDAP/</a></li>
</ul>

<hr>
<h2><a name="netBeansProj">Building the TDS with NetBeans</a></h2>

<p>Thanks to Jon Blower (Univ of Reading) and the MyOcean project for
  writing up <a href="http://www.resc.reading.ac.uk/trac/myocean-tools/wiki/BuildingThreddsWithNetBeans">
    instructions for building the TDS with NetBeans</a>.
</p>

<hr>

<address>
<img src="../images/thread.png" alt="THREDDS" height="108" width="110">
  This document is maintained by Unidata and was last updated June 2010.
  Send comments to <a href="mailto:support-thredds@unidata.ucar.edu">THREDDS support</a>.
</address>

</body>
</html>