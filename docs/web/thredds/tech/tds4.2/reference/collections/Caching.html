<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<h2>File System Caching</h2>
<ul>
  <li>Uses ehcache object caching</li>
  <li>Granularity is a directory</li>
  <li>Check lastModified date, if changed then make OS request for list of directories</li>
  <li>Divide into daily (EG) subdirectories, so never have to scan older ones.</li>
</ul>
<h3>motherlode memory use</h3>
<ul>
  <li>44 CacheDirectory (avg 800 files/dir)</li>
  <li>34,651 CacheFile (6.6M) (avg 190 bytes/file)</li>
  <li>11,550 MFileCached (.xml and .gbx8 get filtered out) (462K) (avg 40 bytes/file, wraps the CacheFile)</li>
</ul>
<p>currently have 1000 ehcache entity, clearly too large.</p>
<p>make each CacheDirectory seperate ehcache entity ??</p>
<p>possible turn off ehcache as default, not yet sure of benefits. possibly not needed for just fmrc. most useful for datasetScan?</p>
<p>CDM default is dont use, must turn on by calling DatasetCollectionManager.setController()</p>
<p>&nbsp;</p>
<h2>FMRC Caching</h2>
<ul>
  <li>uses Berkeley DB</li>
  <li> default root dir is ${user.home}/.unidata/bdb</li>
  <li>MetadataManager.setCacheDirectory();<br />
  </li>
</ul>
<h3>motherlode memory use</h3>
<ul>
  <li>44 FMRC (45M)</li>
  <li>44 FmrcInvLite (33M)</li>
  <li>469 FmrcInvLite.GridInventory (21M)</li>
  <li>106 FmrcInvLite.GridSet (10M)</li>
  <li>98K FmrcInvLite.TimeInv (4M)</li>
  <li>44 NetcdfDataset (7M)</li>
  <li>3K VariableDS (7M)</li>
  <li>32K Attributes (4M)</li>
</ul>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>

</html>
